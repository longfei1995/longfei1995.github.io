<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"longfei1995.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="1. ubuntu基础1.1 系统安装vmware虚拟机装ubuntu 1.2 常见问题1.2.1 ubuntu虚拟机无网络问题描述：ubuntu虚拟机连不上网络，或者右上角没有网络图标。 解决方案： 1.确定宿主机的网络连接方式为NAT模式 2.确定ubuntu版本为20.04 1234567# 此操作可以连上网络 sudo dhclient ens33ifconfig ens33# 此操作，可">
<meta property="og:type" content="article">
<meta property="og:title" content="ubuntu基础">
<meta property="og:url" content="https://longfei1995.github.io/2024/01/01/other_tools/ubuntu%E5%9F%BA%E7%A1%80/index.html">
<meta property="og:site_name" content="胡云浩的blog">
<meta property="og:description" content="1. ubuntu基础1.1 系统安装vmware虚拟机装ubuntu 1.2 常见问题1.2.1 ubuntu虚拟机无网络问题描述：ubuntu虚拟机连不上网络，或者右上角没有网络图标。 解决方案： 1.确定宿主机的网络连接方式为NAT模式 2.确定ubuntu版本为20.04 1234567# 此操作可以连上网络 sudo dhclient ens33ifconfig ens33# 此操作，可">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://longfei1995.github.io/2024/01/01/other_tools/ubuntu%E5%9F%BA%E7%A1%80/images/image-20230703112949624.png">
<meta property="og:image" content="https://longfei1995.github.io/2024/01/01/other_tools/ubuntu%E5%9F%BA%E7%A1%80/images/image-20230706111835893.png">
<meta property="og:image" content="https://longfei1995.github.io/2024/01/01/other_tools/ubuntu%E5%9F%BA%E7%A1%80/images/image-20230922144851146.png">
<meta property="og:image" content="https://longfei1995.github.io/2024/01/01/other_tools/ubuntu%E5%9F%BA%E7%A1%80/images/image-20230706170346015.png">
<meta property="og:image" content="https://longfei1995.github.io/2024/01/01/other_tools/ubuntu%E5%9F%BA%E7%A1%80/images/image-20230706170712361.png">
<meta property="og:image" content="https://longfei1995.github.io/images/1-1713497090622-1.png">
<meta property="og:image" content="https://longfei1995.github.io/images/image-20230925101839302.png">
<meta property="og:image" content="https://longfei1995.github.io/2024/01/01/other_tools/ubuntu%E5%9F%BA%E7%A1%80/images/image-20230712162309340.png">
<meta property="og:image" content="https://longfei1995.github.io/2024/01/01/other_tools/ubuntu%E5%9F%BA%E7%A1%80/images/image-20230712164254284.png">
<meta property="og:image" content="https://longfei1995.github.io/2024/01/01/other_tools/ubuntu%E5%9F%BA%E7%A1%80/images/image-20230712165210295.png">
<meta property="og:image" content="https://longfei1995.github.io/images/image-20230815102941280.png">
<meta property="og:image" content="https://longfei1995.github.io/images/image-20230815103740385.png">
<meta property="og:image" content="https://longfei1995.github.io/2024/01/01/other_tools/ubuntu%E5%9F%BA%E7%A1%80/images/image-20230713151354755.png">
<meta property="og:image" content="https://longfei1995.github.io/2024/01/01/other_tools/ubuntu%E5%9F%BA%E7%A1%80/images/image-20230713152826213.png">
<meta property="og:image" content="https://longfei1995.github.io/2024/01/01/other_tools/ubuntu%E5%9F%BA%E7%A1%80/images/image-20230713144320757.png">
<meta property="og:image" content="https://longfei1995.github.io/2024/01/01/other_tools/ubuntu%E5%9F%BA%E7%A1%80/images/image-20230713144655911.png">
<meta property="og:image" content="https://longfei1995.github.io/images/image-20230816154758363.png">
<meta property="og:image" content="https://longfei1995.github.io/2024/01/01/other_tools/ubuntu%E5%9F%BA%E7%A1%80/images/image-20230925141712412.png">
<meta property="og:image" content="https://longfei1995.github.io/images/image-20230925154348140.png">
<meta property="og:image" content="https://longfei1995.github.io/2024/01/01/other_tools/ubuntu%E5%9F%BA%E7%A1%80/images/image-20230925154523626.png">
<meta property="article:published_time" content="2023-12-31T16:00:00.000Z">
<meta property="article:modified_time" content="2025-04-10T09:05:17.906Z">
<meta property="article:author" content="胡云浩">
<meta property="article:tag" content="安装">
<meta property="article:tag" content="ubuntu">
<meta property="article:tag" content="配置">
<meta property="article:tag" content="问题">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://longfei1995.github.io/2024/01/01/other_tools/ubuntu%E5%9F%BA%E7%A1%80/images/image-20230703112949624.png">

<link rel="canonical" href="https://longfei1995.github.io/2024/01/01/other_tools/ubuntu%E5%9F%BA%E7%A1%80/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>ubuntu基础 | 胡云浩的blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">胡云浩的blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">日常笔记</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://longfei1995.github.io/2024/01/01/other_tools/ubuntu%E5%9F%BA%E7%A1%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="胡云浩">
      <meta itemprop="description" content="记录生活，记录工作，记录学习">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="胡云浩的blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          ubuntu基础
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-01-01 00:00:00" itemprop="dateCreated datePublished" datetime="2024-01-01T00:00:00+08:00">2024-01-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-04-10 17:05:17" itemprop="dateModified" datetime="2025-04-10T17:05:17+08:00">2025-04-10</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ubuntu/" itemprop="url" rel="index"><span itemprop="name">ubuntu</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h4 id="1-ubuntu基础"><a href="#1-ubuntu基础" class="headerlink" title="1. ubuntu基础"></a>1. ubuntu基础</h4><h5 id="1-1-系统安装"><a href="#1-1-系统安装" class="headerlink" title="1.1 系统安装"></a>1.1 系统安装</h5><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/38797088">vmware虚拟机装ubuntu</a></p>
<h5 id="1-2-常见问题"><a href="#1-2-常见问题" class="headerlink" title="1.2 常见问题"></a>1.2 常见问题</h5><h6 id="1-2-1-ubuntu虚拟机无网络"><a href="#1-2-1-ubuntu虚拟机无网络" class="headerlink" title="1.2.1 ubuntu虚拟机无网络"></a>1.2.1 ubuntu虚拟机无网络</h6><p>问题描述：ubuntu虚拟机连不上网络，或者右上角没有网络图标。</p>
<p>解决方案：</p>
<p>1.确定宿主机的网络连接方式为NAT模式</p>
<p>2.确定ubuntu版本为20.04</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 此操作可以连上网络 </span></span><br><span class="line"><span class="built_in">sudo</span> dhclient ens33</span><br><span class="line">ifconfig ens33</span><br><span class="line"><span class="comment"># 此操作，可以让右上角重现图标</span></span><br><span class="line"><span class="built_in">sudo</span> service NetworkManager stop</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> /var/lib/NetworkManager/NetworkManager.state</span><br><span class="line"><span class="built_in">sudo</span> service NetworkManager start</span><br></pre></td></tr></table></figure>

<h6 id="1-2-2-虚拟机和宿主机无法复制粘贴"><a href="#1-2-2-虚拟机和宿主机无法复制粘贴" class="headerlink" title="1.2.2 虚拟机和宿主机无法复制粘贴"></a>1.2.2 虚拟机和宿主机无法复制粘贴</h6><p>解决方案：安装<code>vmware-tools</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 确保软件包是最新的</span></span><br><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"><span class="built_in">sudo</span> apt install open-vm-tools</span><br><span class="line"><span class="built_in">sudo</span> apt install open-vm-tools-desktop</span><br><span class="line"><span class="comment"># 查看是否有更新</span></span><br><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"><span class="built_in">sudo</span> apt upgrade</span><br><span class="line">reboot</span><br></pre></td></tr></table></figure>

<h6 id="1-2-3-设置共享文件夹"><a href="#1-2-3-设置共享文件夹" class="headerlink" title="1.2.3 设置共享文件夹"></a>1.2.3 设置共享文件夹</h6><p>问题描述：虚拟机设置好共享文件夹后，在虚拟机中可能不显示，此时经过如下命令即可显示</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> vmhgfs-fuse .host:/ /mnt -o allow_other</span><br></pre></td></tr></table></figure>

<p>如果想要开机启动自动添加此命令，可以加到<code>ubuntu</code>虚拟机的启动脚本<code>/etc/rc.local</code>中。如果没有此文件，那么创建后，赋予权限<code>x</code>即可。<code>rc.local</code>示例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh -e</span></span><br><span class="line"><span class="built_in">sudo</span> vmhgfs-fuse .host:/ /mnt -o allow_other</span><br></pre></td></tr></table></figure>

<h6 id="1-2-4-启用ssh服务"><a href="#1-2-4-启用ssh服务" class="headerlink" title="1.2.4 启用ssh服务"></a>1.2.4 启用ssh服务</h6><p>作用：让别的电脑可以远程访问你的ubuntu</p>
<p>1.打开终端，安装openssh-server软件包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"><span class="built_in">sudo</span> apt install openssh-server</span><br></pre></td></tr></table></figure>

<p>​	2.安装完成后，ssh服务默认启动，使用如下命令校验ssh运行状态</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl status ssh</span><br></pre></td></tr></table></figure>

<p>​	3.Ubuntu 默认使用 <a href="https://link.zhihu.com/?target=https://linux265.com/news/3793.html">ufw 防火墙</a>配置工具，如果你启用了防火墙，请确保防火墙打开了 SSH 端口，命令如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> ufw allow ssh</span><br></pre></td></tr></table></figure>

<p>至此，就可以通过SSH远程连接到你的Ubuntu系统了。</p>
<h6 id="1-2-5-ubuntu双屏显示问题"><a href="#1-2-5-ubuntu双屏显示问题" class="headerlink" title="1.2.5 ubuntu双屏显示问题"></a>1.2.5 ubuntu双屏显示问题</h6><p>有时候开机或者锁屏以后，ubuntu不再双屏显示</p>
<ol>
<li><p>首先，我们需要创建一个脚本来配置显示器<code>sudo nano /usr/local/bin/restore-displays.sh</code>在脚本里面添加如下内容，并且给脚本赋上x权限</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 等待几秒确保系统完全唤醒</span></span><br><span class="line"><span class="built_in">sleep</span> 2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用xrandr获取连接的显示器</span></span><br><span class="line">DISPLAYS=$(xrandr | grep <span class="string">&quot; connected&quot;</span> | awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 假设有两个显示器，分别称为DP-0和HDMI-0</span></span><br><span class="line"><span class="comment"># 请使用 xrandr 命令查看您实际的显示器名称并相应修改下面的命令</span></span><br><span class="line">xrandr --output DP-0 --auto --primary</span><br><span class="line">xrandr --output HDMI-0 --auto --right-of DP-0</span><br></pre></td></tr></table></figure>
</li>
<li><p>其次，我们需要创建一个systemd服务来监听屏幕解锁这个事件<code>sudo nano /etc/systemd/system/restore-displays.service</code>，添加以下内容：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=Restore display configuration after unlock</span><br><span class="line">After=sleep.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=simple</span><br><span class="line">Environment=DISPLAY=:0</span><br><span class="line">Environment=XAUTHORITY=/home/YOUR_USERNAME/.Xauthority</span><br><span class="line">ExecStart=/usr/local/bin/restore-displays.sh</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=sleep.target</span><br></pre></td></tr></table></figure>
</li>
<li><p>启动上面的服务</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> restore-displays.service</span><br><span class="line"><span class="built_in">sudo</span> systemctl start restore-displays.service</span><br></pre></td></tr></table></figure>
</li>
<li><p>如果使用的是GNOME桌面，还可以添加以下步骤来确保更好的兼容性。创建一个新的脚本：<code>sudo nano /usr/share/gdm/greeter/autostart/restore-displays.desktop</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[Desktop Entry]</span><br><span class="line">Type=Application</span><br><span class="line">Name=Restore Displays</span><br><span class="line">Exec=/usr/local/bin/restore-displays.sh</span><br><span class="line">NoDisplay=true</span><br><span class="line">X-GNOME-AutoRestart=true</span><br></pre></td></tr></table></figure></li>
</ol>
<h5 id="1-3-软件卸载"><a href="#1-3-软件卸载" class="headerlink" title="1.3 软件卸载"></a>1.3 软件卸载</h5><p>要彻底卸载Ubuntu 20.04上的某个软件，您可以按照以下步骤进行操作：</p>
<ol>
<li>卸载软件包<code>sudo apt remove &lt;package-name&gt;</code></li>
<li>卸载包相关的依赖<code>sudo apt autoremove</code></li>
<li>卸载软件包的配置<code>sudo apt purge &lt;package-name&gt;</code></li>
</ol>
<h4 id="2-linux基础"><a href="#2-linux基础" class="headerlink" title="2. linux基础"></a>2. linux基础</h4><img src="images/image-20230703112949624.png" alt="image-20230703112949624" style="zoom:50%;" />

<p>用户是无法直接控制计算机的硬件的，必须通过操作系统内核给出的系统API来控制相应的硬件行为。在<code>windows</code>中，我们可以使用图形界面或者命令行去操作系统。在<code>ubuntu</code>中同样有图形界面和<code>shell</code>。</p>
<p><code>shell</code>是终端程序的统称，是用户和操作系统内核之间的翻译官，<code>ubuntu</code>中使用的是一个常用的<code>shell</code>，名为<code>bash</code>。用<code>echo $SHELL</code>可以查看当前操作系统的默认<code>shell</code>类型。</p>
<h5 id="2-1-常用shell命令"><a href="#2-1-常用shell命令" class="headerlink" title="2.1 常用shell命令"></a>2.1 常用shell命令</h5><p>一个<code>shell</code>命令的一般格式为</p>
<blockquote>
<p>命令名称   [命令参数]   [命令对象]</p>
</blockquote>
<p>命令名称、命令参数与命令对象之间要用空格进行分隔，且字母严格区分大小写。命令参数可以用长格式（完整的选项名称），也可以用短格式（单个字母的缩写），一般来说两者分别用“–”与“-”作为前缀。如<code>ls --all</code>或者<code>ls -a</code></p>
<h6 id="2-1-1-echo"><a href="#2-1-1-echo" class="headerlink" title="2.1.1 echo"></a>2.1.1 echo</h6><p>作用：在终端设备上打印字符串或变量提取后的值</p>
<p>语法格式：<code>echo [字符串/$变量]</code></p>
<p>示例：<code>echo hello</code> <code>echo $SHELL</code></p>
<h6 id="2-1-2-date"><a href="#2-1-2-date" class="headerlink" title="2.1.2 date"></a>2.1.2 date</h6><p>作用：显示、设置日期</p>
<p>语法格式：<code>date [+指定格式]</code></p>
<p>示例：</p>
<ul>
<li>显示日期<code>date</code></li>
<li>按照“年-月-日 小时:分钟:秒”的格式查看当前系统时间<code>date &quot;+%Y-%m-%d %H:%M:%S&quot;</code></li>
<li>设置系统时间<code>date -s &quot;20230703 13:42:00&quot;</code></li>
</ul>
<h6 id="2-1-3-ps"><a href="#2-1-3-ps" class="headerlink" title="2.1.3 ps"></a>2.1.3 ps</h6><p>作用：查看系统中的进程状态，全程”Process Status”</p>
<p>语法格式：<code>ps [参数]</code></p>
<p>参数：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-e 显示所有的进程</span><br><span class="line">-f 显示程序间的关系</span><br></pre></td></tr></table></figure>

<p>示例：</p>
<ul>
<li>显示所有和apa相关的进程<code>ps -e | grep apa</code></li>
<li>显示所有和apa相关的进程，并且重定向到txt中<code>ps -e | grep apa &gt; test.txt</code></li>
</ul>
<h6 id="2-1-4-top"><a href="#2-1-4-top" class="headerlink" title="2.1.4 top"></a>2.1.4 top</h6><p>作用：动态地查看系统状态</p>
<p>语法格式：<code>top</code></p>
<p>参数意义：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">第1行：系统时间、运行时间、登录终端数、系统负载（3个数值分别为1分钟、5分钟、15分钟内的平均值，数值越小意味着负载越低）。</span><br><span class="line">第2行：进程总数、运行中的进程数、睡眠中的进程数、停止的进程数、僵死的进程数。</span><br><span class="line">第3行：用户占用资源百分比、系统内核占用资源百分比、改变过优先级的进程资源百分比、空闲的资源百分比等。其中数据均为CPU数据并以百分比格式显示，例如“99.9 id”意味着有99.9%的CPU处理器资源处于空闲。</span><br><span class="line">第4行：物理内存总量、内存空闲量、内存使用量、作为内核缓存的内存量。</span><br><span class="line">第5行：虚拟内存总量、虚拟内存空闲量、虚拟内存使用量、已被提前加载的内存量。</span><br></pre></td></tr></table></figure>

<p>示例：</p>
<ul>
<li>查看系统状态<code>top</code></li>
</ul>
<h6 id="2-1-5-pidof"><a href="#2-1-5-pidof" class="headerlink" title="2.1.5 pidof"></a>2.1.5 pidof</h6><p>作用：查看某个进程的pid号码 </p>
<p>示例：看bash的pid<code>pidof bash</code></p>
<h6 id="2-1-6-kill"><a href="#2-1-6-kill" class="headerlink" title="2.1.6 kill"></a>2.1.6 kill</h6><p>作用：终止某个指定PID进程</p>
<p>语法格式：<code>kill [参数] PID</code></p>
<p>示例：</p>
<ul>
<li>强制杀死进程<code>kill -9 Pid数值</code></li>
<li><code>slay [应用程序名]</code>也是同样的作用</li>
</ul>
<h6 id="2-1-7-history"><a href="#2-1-7-history" class="headerlink" title="2.1.7 history"></a>2.1.7 history</h6><p>作用：显示最近执行过的<code>1000</code>条命令。p.s.可以通过改<code>/etc/profile</code>文件中的变量<code>HISTSIZE</code>去修改容量。</p>
<p>示例：</p>
<ul>
<li><p>查看最近的命令，并且执行序号为10的命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">history</span></span><br><span class="line">    1  <span class="built_in">sudo</span> gedit /etc/apt/sources.list</span><br><span class="line">    2  <span class="built_in">sudo</span> apt update</span><br><span class="line">    3  <span class="built_in">sudo</span> apt upgrade</span><br><span class="line">    4  <span class="built_in">sudo</span> apt update</span><br><span class="line">    5  <span class="built_in">sudo</span> apt upgrade</span><br><span class="line">    6  clear</span><br><span class="line">    7  <span class="built_in">sudo</span> apt install open-vm-tools</span><br><span class="line">    8  <span class="built_in">sudo</span> apt install open-vm-tools-desktop </span><br><span class="line">    9  搜索“终端”，或仅使用键盘快捷键Ctrl + Alt + T。</span><br><span class="line">   10  cmake --version</span><br><span class="line">   11  tar -xvf cmake-3.25.3-linux-x86_64.tar.gz </span><br><span class="line">   12  <span class="built_in">ls</span></span><br><span class="line">   13  <span class="built_in">cd</span> cmake-3.25.3-linux-x86_64/</span><br><span class="line">   14  <span class="built_in">ls</span></span><br><span class="line">   15  <span class="built_in">cd</span> bin/</span><br><span class="line">   16  <span class="built_in">ls</span></span><br><span class="line">   17  <span class="built_in">cd</span> ..</span><br><span class="line">   18  <span class="built_in">ls</span></span><br><span class="line">$ !10</span><br><span class="line">	cmake --version</span><br><span class="line">	cmake version 3.25.3</span><br></pre></td></tr></table></figure></li>
</ul>
<h6 id="2-1-8-find"><a href="#2-1-8-find" class="headerlink" title="2.1.8 find"></a>2.1.8 find</h6><p>作用：按指定条件查找文件的位置<br>语法：<code>find [查找范围] 查找条件</code></p>
<p>常用参数： p.s. <code>find</code>很特殊，后面虽然是长格式形式，但还是用<code>-</code>，而不是<code>--</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-name 匹配名称</span><br></pre></td></tr></table></figure>

<p>示例：</p>
<ul>
<li><p>查找当前目录下，名字中带apa的文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 创建文件</span><br><span class="line">touch apa.txt apa1.txt apa2.txt</span><br><span class="line"># find</span><br><span class="line">find ./ -name &quot;apa*&quot;</span><br><span class="line"># outputs</span><br><span class="line">./apa2.txt</span><br><span class="line">./apa.txt</span><br><span class="line">./apa1.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p>查找程序目录下，有没有<code>ls</code>程序</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 输入</span></span><br><span class="line"><span class="built_in">sudo</span> find /usr/bin /usr/lib/ -name <span class="string">&quot;ls&quot;</span></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">/usr/bin/ls</span><br><span class="line">/usr/lib/klibc/bin/ls</span><br><span class="line"><span class="comment"># 用whereis命令也可以，whereis是专门用来查找二进制文件的命令</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<p>扩展：<code>whereis</code>和<code>which</code>也可用来搜索。区别在于：</p>
<ul>
<li><p><code>find</code>可以搜索everything</p>
</li>
<li><p><code>whereis</code>用来搜索二进制程序名+源代码+帮助文档</p>
<img src="images/image-20230706111835893.png" alt="image-20230706111835893" style="zoom: 67%;" />

<ul>
<li><code>which</code>仅仅用来搜索可执行程序，不适用于内置命令或者命令的别名(alias)。试图用<code>which</code>寻找内置命令如<code>cd</code>时，会没有响应或者报错。</li>
</ul>
</li>
</ul>
<img src="images/image-20230922144851146.png" alt="image-20230922144851146" style="zoom:67%;" />

<h6 id="2-1-9-cat"><a href="#2-1-9-cat" class="headerlink" title="2.1.9 cat"></a>2.1.9 cat</h6><p>作用：查看内容较少的文件的内容，英文全称<code>concatenate</code></p>
<p>示例：</p>
<ol>
<li>查看txt内容<code>cat test.txt</code></li>
<li>按行号查看<code>cat -n test.txt</code></li>
</ol>
<h6 id="2-1-10-touch"><a href="#2-1-10-touch" class="headerlink" title="2.1.10 touch"></a>2.1.10 touch</h6><p>作用：创建一个空白的文件或者重设一下文件的日期时间</p>
<p>语法：<code>touch [参数] filename</code></p>
<p>参数：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-a 仅仅修改读取时间(atime)</span><br><span class="line">-m 仅仅修改修改时间(mtime)</span><br><span class="line">-d 同时修改读取时间和mtime</span><br></pre></td></tr></table></figure>

<p>示例：</p>
<img src="images/image-20230706170346015.png" alt="image-20230706170346015" style="zoom:67%;" />

<h6 id="2-1-11-mv"><a href="#2-1-11-mv" class="headerlink" title="2.1.11 mv"></a>2.1.11 mv</h6><p>作用：剪切或者重命名文件，p.s.如果在同一个目录中将某个文件剪切后还粘贴到当前目录下，其实也就是对该文件进行了重命名操作。</p>
<p>语法：<code>mv [参数] 源文件名字 目标文件名字</code></p>
<p>示例：</p>
<img src="images/image-20230706170712361.png" alt="image-20230706170712361" style="zoom: 67%;" />

<h6 id="2-1-12-tar"><a href="#2-1-12-tar" class="headerlink" title="2.1.12 tar"></a>2.1.12 tar</h6><p>作用：对文件进行压缩或者解压</p>
<p>语法：<code>tar [参数] 文件名称</code></p>
<p>参数：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-c 创建压缩文件</span><br><span class="line">-x 解压文件</span><br><span class="line">-z 用Gzip解压或者压缩文件</span><br><span class="line">-v 显示压缩或者解压的过程</span><br><span class="line">-f 指定目标文件名</span><br><span class="line">-C 解压到指定目录</span><br></pre></td></tr></table></figure>

<p>示例：</p>
<ul>
<li>压缩文件<code>tar -czvf test.tar.gz ./test</code></li>
<li>解压文件<code>tar -xzvf test.tar.gz -C /home</code></li>
</ul>
<h6 id="2-1-13-tee"><a href="#2-1-13-tee" class="headerlink" title="2.1.13 tee"></a>2.1.13 tee</h6><p>作用：打屏的同时把屏幕输出存到文件中</p>
<p>参数：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-a	追加写入文件，而非覆盖写入</span><br><span class="line">-i	忽略中断信号</span><br></pre></td></tr></table></figure>

<p>示例：</p>
<ol>
<li><code>ls -l | tee output.txt</code></li>
<li><code>ps -e | grep apa | tee output.txt</code></li>
</ol>
<h6 id="2-1-14-scp"><a href="#2-1-14-scp" class="headerlink" title="2.1.14 scp"></a>2.1.14 scp</h6><p>作用：基于ssh登录的安全远程文件拷贝命令</p>
<p>语法：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 从本地复制文件到远端</span></span><br><span class="line">scp [选项] local_file remote_username@remote_ip:remote_folder </span><br><span class="line"><span class="comment"># 从远端复制文件到本地</span></span><br><span class="line">scp [选项] remote_username@remote_ip:remote_file local_folder</span><br></pre></td></tr></table></figure>

<p>参数：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-r	递归复制整个目录</span><br><span class="line">-P 	注意是大写的P, 指定数据传输用到的端口号</span><br></pre></td></tr></table></figure>

<h6 id="2-1-15-ln"><a href="#2-1-15-ln" class="headerlink" title="2.1.15 ln"></a>2.1.15 ln</h6><p>作用：创建连接</p>
<p>语法：<code>ln [参数] item link</code></p>
<p>说明：</p>
<ul>
<li>硬链接已经不建议使用了，现在建议使用软连接（符号链接）</li>
<li>删除符号链接时，文件本身并没有被删除</li>
<li>将内容写入符号链接时，那么这些内容也被写入到了文件本身</li>
<li>创建符号链接时，如果item使用相对路径，那么item和链接一起被移动的时候，也不会破坏链接。更加可取</li>
</ul>
<p>示例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># example 在桌面创建某个文件夹的快捷方式</span></span><br><span class="line"><span class="built_in">ln</span> -s /home/hyh/coder/cpp/notes/ ~/Desktop/</span><br></pre></td></tr></table></figure>

<h6 id="2-1-16-cd"><a href="#2-1-16-cd" class="headerlink" title="2.1.16 cd"></a>2.1.16 cd</h6><p>作用：改变当前工作目录</p>
<table>
<thead>
<tr>
<th align="center">命令</th>
<th align="center">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="center">cd</td>
<td align="center">进入主工作目录</td>
</tr>
<tr>
<td align="center">cd -</td>
<td align="center">将工作目录改成先前的工作目录</td>
</tr>
</tbody></table>
<h6 id="2-1-17-file"><a href="#2-1-17-file" class="headerlink" title="2.1.17 file"></a>2.1.17 file</h6><p>作用：在linux中，一切皆文件。<code>file</code>用来确定文件的类型</p>
<p>用法：<code>file &lt;filename&gt;</code></p>
<h6 id="2-1-18-less"><a href="#2-1-18-less" class="headerlink" title="2.1.18 less"></a>2.1.18 less</h6><p>作用：用来查看文本程序的内容</p>
<p>用法：<code>less &lt;filename&gt;</code>	用键盘方向键可以翻页，用鼠标滚轮也可以，按<code>q</code>退出</p>
<h6 id="2-1-19-type"><a href="#2-1-19-type" class="headerlink" title="2.1.19 type"></a>2.1.19 type</h6><p>作用：用来显示命令的类型</p>
<p>用法：<code>type &lt;命令&gt;</code></p>
<p>小知识：linux的命令可以分为以下四种类型</p>
<ol>
<li>可执行程序，用户自己写的或者下载的可执行程序</li>
<li>shell的内置命令，比如<code>cd</code>等</li>
<li>shell函数</li>
<li><code>alias</code>命令，可以在其他命令的基础上定义自己的命令</li>
</ol>
<h6 id="2-1-20-alias"><a href="#2-1-20-alias" class="headerlink" title="2.1.20 alias"></a>2.1.20 alias</h6><p>作用：给命令取别名</p>
<p>用法：<code>alias name=&quot;string&quot;</code></p>
<h6 id="2-1-21-perf"><a href="#2-1-21-perf" class="headerlink" title="2.1.21 perf"></a>2.1.21 perf</h6><p>作用：perf是Linux内核提供的一个强大的性能分析工具，用于采集各种类型的性能数据</p>
<p>用法：</p>
<ol>
<li>安装perf工具</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install linux-tools-common linux-tools-generic linux-tools-`<span class="built_in">uname</span> -r`</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>启动我们要测试的程序，并且记录下程序的pid</p>
</li>
<li><p>使用perf记录cpu信息</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> perf record -p &lt;程序PID&gt; -e cpu-clock -g</span><br><span class="line"><span class="comment"># record: record子命令用于记录程序运行过程中的性能事件。</span></span><br><span class="line"><span class="comment"># -p: 指定程序的pid</span></span><br><span class="line"><span class="comment"># -e event，一般使用cpu-cycles参数，但是在虚拟机中，这个参数是无效的，得使用cpu-clock参数。详见</span></span><br><span class="line">https://stackoverflow.com/questions/21155354/perf-data-file-has-no-samples</span><br><span class="line"><span class="comment"># -g: 记录调用栈，这对于后续生成火焰图是必要的，因为火焰图需要栈信息来构建。</span></span><br></pre></td></tr></table></figure>

<ol start="4">
<li>运行完成后，将<code>perf.data</code>转换为<code>out.perf</code></li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> perf script &gt; out.perf</span><br><span class="line"><span class="comment"># script: script 是 perf 的一个子命令，用于将之前通过 perf record 命令收集的原始二进制性能数据转换为可读的文本格式。</span></span><br></pre></td></tr></table></figure>

<ol start="5">
<li>将<code>out.perf</code>拖到<a target="_blank" rel="noopener" href="https://profiler.firefox.com/%E5%8D%B3%E5%8F%AF%E6%9F%A5%E7%9C%8B%E7%81%AB%E7%84%B0%E5%9B%BE">https://profiler.firefox.com/即可查看火焰图</a></li>
</ol>
<p><img src="/images/1-1713497090622-1.png" alt="1"></p>
<h5 id="2-2-实用调试"><a href="#2-2-实用调试" class="headerlink" title="2.2 实用调试"></a>2.2 实用调试</h5><h6 id="2-2-1-输出重定向"><a href="#2-2-1-输出重定向" class="headerlink" title="2.2.1 输出重定向"></a>2.2.1 输出重定向</h6><p>作用：输出重定向指的是把原本要打印在屏幕上的东西存到指定文件中</p>
<p>语法: <code>&gt;</code>覆写， <code>&gt;&gt;</code>追加</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">命令 &gt; 文件	 	<span class="comment">#只将标准输出重定向到一个文件中（清空原有文件的数据）</span></span><br><span class="line">命令 2&gt; 文件	<span class="comment">#只将错误输出重定向到一个文件中（清空原有文件的数据）</span></span><br><span class="line">命令 &amp;&gt; 文件    <span class="comment">#将标准输出与错误输出共同写入到文件中（清空原有文件的数据）</span></span><br></pre></td></tr></table></figure>

<p>参数：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">标准输出重定向（STDOUT，文件描述符为1）文件描述符1可以省略不写，是默认的</span><br><span class="line">错误输出重定向（STDERR，文件描述符为2）</span><br></pre></td></tr></table></figure>

<p>特殊文件：<code>/dev/null</code></p>
<p>这个特殊文件，接收输入却不对输入做任何的处理。我们可以借助这个文件，来屏蔽命令的打屏。</p>
<p>例如有如下的代码：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;normal msg&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    std::cerr &lt;&lt; <span class="string">&quot;error msg&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>分别重定向正常输出、错误输出、正常&amp;错误输出，测试打印如下：</p>
<p><img src="/images/image-20230925101839302.png" alt="image-20230925101839302"></p>
<h6 id="2-2-2-管道符"><a href="#2-2-2-管道符" class="headerlink" title="2.2.2 管道符"></a>2.2.2 管道符</h6><p>作用：把前一个命令原本要输出到屏幕的信息当作后一个命令的标准输入</p>
<p>语法：<code>命令A | 命令B</code></p>
<h6 id="2-2-3-命令通配符"><a href="#2-2-3-命令通配符" class="headerlink" title="2.2.3 命令通配符"></a>2.2.3 命令通配符</h6><p>作用：用来匹配通用信息的符号</p>
<p>参数表：<code>[]</code>用来找文件，<code>&#123;&#125;</code>用来生成文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">通配符					  含义</span><br><span class="line">*						任意字符</span><br><span class="line">?						单个任意字符</span><br><span class="line">[abcd]					匹配abcd中任意一个字符</span><br><span class="line">[a-z]					a-z范围内的字符</span><br><span class="line">&#123;...&#125;					表示生成序列，以逗号分隔，且不能有空格</span><br><span class="line">&#123;a..z&#125;					生成a-z</span><br><span class="line">[!abcd]					不匹配abcd中的任意字符</span><br></pre></td></tr></table></figure>

<p>示例：</p>
<img src="images/image-20230712162309340.png" alt="image-20230712162309340" style="zoom:67%;" />

<h6 id="2-2-4-转义字符"><a href="#2-2-4-转义字符" class="headerlink" title="2.2.4 转义字符"></a>2.2.4 转义字符</h6><p>作用：linux中有很多符号都是有特殊含义的，如果期望将这个字符当成普通字符来处理，需要经过<code>\</code>转义</p>
<p>参数表：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">反斜杠\			使反斜杠后面的字符变为单纯的字符。</span><br><span class="line">单引号&#x27;&#x27;			单引号里面的变量都是普通字符串</span><br><span class="line">双引号&quot;&quot;			双引号里面的变量保持了变量原有的属性</span><br><span class="line">反引号``			把其中的命令执行后返回结果</span><br></pre></td></tr></table></figure>

<p>示例：</p>
<img src="images/image-20230712164254284.png" alt="image-20230712164254284" style="zoom:67%;" />

<h6 id="2-2-5-常用变量"><a href="#2-2-5-常用变量" class="headerlink" title="2.2.5 常用变量"></a>2.2.5 常用变量</h6><p>在Linux系统中，变量名称一般都是大写的，命令则都是小写的，这是一种约定俗成的规范。</p>
<p>常用变量表：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">变量名称						 作用</span><br><span class="line">HOME						   	用户的主目录（即家目录）</span><br><span class="line">SHELL							用户在使用的Shell解释器名称</span><br><span class="line">LANG							系统语言、语系名称</span><br><span class="line">PATH							定义解释器搜索用户执行命令的路径</span><br></pre></td></tr></table></figure>

<p>示例：</p>
<img src="images/image-20230712165210295.png" alt="image-20230712165210295" style="zoom:67%;" />

<p>tips:</p>
<ul>
<li><p>如果工作需要，可以使用<code>export</code>命令将变量提升为全局变量，这样其他用户也就可以使用它了</p>
</li>
<li><p>直接在终端设置的变量能够立即生效，但在重启终端后就会失效，因此我们需要将变量和变量值写入到.bashrc或者.bash_profile文件中，以确保永久能使用它们。</p>
</li>
</ul>
<h6 id="2-2-6-使用TDA4的GDB"><a href="#2-2-6-使用TDA4的GDB" class="headerlink" title="2.2.6 使用TDA4的GDB"></a>2.2.6 使用TDA4的GDB</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># source环境</span></span><br><span class="line"><span class="built_in">source</span> /usr/local/sdk/pps/qnx710/qnxsdp-env.sh</span><br><span class="line"><span class="comment"># 使用gdb</span></span><br><span class="line">/usr/local/sdk/pps/qnx710/host/linux/x86_64/usr/bin/ntoaarch64-gdb apa_plan apa_plan.core</span><br></pre></td></tr></table></figure>

<h5 id="2-3-常见问题"><a href="#2-3-常见问题" class="headerlink" title="2.3 常见问题"></a>2.3 常见问题</h5><h6 id="2-3-1-重定向权限不够"><a href="#2-3-1-重定向权限不够" class="headerlink" title="2.3.1 重定向权限不够"></a>2.3.1 重定向权限不够</h6><p>问题背景：想要把echo打印重定向到<code>/usr/local</code>的某个文件中，即使加了<code>sudo</code>，也提示权限不够。</p>
<p><img src="/images/image-20230815102941280.png" alt="image-20230815102941280"></p>
<p>问题解析：</p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/82256/how-do-i-use-sudo-to-redirect-output-to-a-location-i-dont-have-permission-to-wr">linux - How do I use sudo to redirect output to a location I don’t have permission to write to? - Stack Overflow</a></p>
<p>这是因为<code>sudo</code>只是给了当前shell执行<code>echo</code>的管理员权限，并没有给当前shell执行重定向<code>&gt;</code>的权限。</p>
<p>问题解决：</p>
<p>使用<code>bash -c</code>让<code>bash</code>作为解释器执行整条命令</p>
<p><img src="/images/image-20230815103740385.png" alt="image-20230815103740385"></p>
<h4 id="3-shell脚本"><a href="#3-shell脚本" class="headerlink" title="3. shell脚本"></a>3. shell脚本</h4><h5 id="3-1-基本概念"><a href="#3-1-基本概念" class="headerlink" title="3.1 基本概念"></a>3.1 基本概念</h5><h6 id="3-1-1-注释"><a href="#3-1-1-注释" class="headerlink" title="3.1.1 注释"></a>3.1.1 注释</h6><p><code>#</code>是shell脚本的注释符</p>
<h6 id="3-1-2-指定解释器"><a href="#3-1-2-指定解释器" class="headerlink" title="3.1.2 指定解释器"></a>3.1.2 指定解释器</h6><p>如果脚本首行不指定解释器，那么脚本会以系统的默认解释器<code>echo $SHELL</code>运行。可以通过<code>#!</code>指定脚本的解释器，如<code>#!/bin/bash</code>。</p>
<p><code>tips:</code>可以通过<code>cat /etc/shells</code>查看系统中已安装的解释器</p>
<h6 id="3-1-3-变量"><a href="#3-1-3-变量" class="headerlink" title="3.1.3 变量"></a>3.1.3 变量</h6><p>指向内存中的一块区域，<code>shell</code>脚本中的变量无需指定数据类型。要使用变量，必须在变量前加入<code>$</code>符号。</p>
<p>示例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">TEST=<span class="string">&quot;hello&quot;</span> 	<span class="comment"># 等号两边不能有空格</span></span><br><span class="line">TEST_2=$(<span class="built_in">pwd</span>)	<span class="comment"># 可以将命令执行以后的结果赋值给一个变量</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$TEST</span></span><br></pre></td></tr></table></figure>

<p>示例2：将用户的输入读取到变量中</p>
<p><code>read</code>命令用于接收键盘的输入，用法为<code>read -p &quot;PROMPT MESSAGE&quot; VARIABLE</code>。其中<code>PROMPT MESSAGE</code>为提示用户的信息，变量<code>VARIABLE</code>可以保存用户的输入，可以在程序中使用该变量</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;请按下对应数字，执行相应的功能。运行apa_plan(1), 运行ralog(2), 运行apa_plan&amp;&amp;ralog(3), 记录所有的log(4)&quot;</span> CHOOSE_NUM</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;用户选择了<span class="variable">$CHOOSE_NUM</span>&quot;</span></span><br></pre></td></tr></table></figure>

<p><code>tips:</code>如果<code>shell</code>脚本中添加了变量，必须使用<code>source</code>或<code>.</code>方法去执行脚本</p>
<p>比如<code>shell</code>脚本中添加了环境变量<code>export PATH=/usr/local/mdc_sdk/dp_gea/mdc_cross_compiler/bin:$PATH</code>。那么在执行<code>shell</code>脚本时，不能直接.&#x2F;xx.sh，因为通过这种方式执行一个脚本其实是在子shell中运行的，执行的结果只对子shell有效，并不会在父shell中生效。正确的方式是：<strong>source xx.sh</strong>。source命令的作用是在当前bash终端下读取并执行shell文件中的命令。</p>
<h6 id="3-1-4-条件测试语句"><a href="#3-1-4-条件测试语句" class="headerlink" title="3.1.4 条件测试语句"></a>3.1.4 条件测试语句</h6><p>主要用于条件判断，语法为<code>[ 条件表达式 ]</code></p>
<p>注意： 1. <code>[]</code>的前后必须有空格。如<code>[ -e /etc/passwd ]</code>。<code>[-e /etc/passwd]</code>是错误的写法。</p>
<p>​			 2. 如果<code>[]</code>中的表达式成立，那么返回数字0。不成立返回其它非零值。</p>
<p>针对第二点，可能与<code>C++</code>语言有点反差，可以通过以下语句测试。<code>$?</code>可以显示上次命令执行后的返回值</p>
<img src="images/image-20230713151354755.png" alt="image-20230713151354755" style="zoom:67%;" />

<p>判断文件情况</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-d FILE_NAME  <span class="comment"># True if FILE_NAME is a directory</span></span><br><span class="line">-e FILE_NAME  <span class="comment"># True if FILE_NAME exists</span></span><br><span class="line">-f FILE_NAME  <span class="comment"># True if FILE_NAME exists and is a regular file</span></span><br><span class="line">-r FILE_NAME  <span class="comment"># True if FILE_NAME is readable</span></span><br><span class="line">-s FILE_NAME  <span class="comment"># True if FILE_NAME exists and is not empty</span></span><br><span class="line">-w FILE_NAME  <span class="comment"># True if FILE_NAME has write permission</span></span><br><span class="line">-x FILE_NAME  <span class="comment"># True if FILE_NAME is executable</span></span><br></pre></td></tr></table></figure>

<p>判断字符串</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-z STRING  			<span class="comment"># True if STRING is empty</span></span><br><span class="line">-n STRING  			<span class="comment"># True if STRING is not empty</span></span><br><span class="line">STRING1 == STRIN2 	<span class="comment"># True if strings are equal</span></span><br><span class="line">STRING1 != STRIN2 	<span class="comment"># True if strings are not equal</span></span><br></pre></td></tr></table></figure>

<p>判断数字</p>
<p>为什么<code>linux</code>不使用<code>&lt;</code>,<code>&gt;</code>等符号，因为这个和重定向符冲突</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var1 -eq var2  <span class="comment"># True if var1 is equal to var2</span></span><br><span class="line">var1 -ne var2  <span class="comment"># True if var1 not equal to var2</span></span><br><span class="line">var1 -lt var2  <span class="comment"># True if var1 is less than var2</span></span><br><span class="line">var1 -gt var2  <span class="comment"># True if var1 is greater than var2</span></span><br><span class="line">var1 -le var2  <span class="comment"># True if var1 is less than or equal to var2</span></span><br><span class="line">var1 -ge var2  <span class="comment"># True if var1 is greater than or equal to var2</span></span><br></pre></td></tr></table></figure>

<h6 id="3-1-5-条件语句"><a href="#3-1-5-条件语句" class="headerlink" title="3.1.5 条件语句"></a>3.1.5 条件语句</h6><p>1.<code>if</code>语句</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ condition-is-true ]; <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">command</span> 1</span><br><span class="line">  <span class="built_in">command</span> 2</span><br><span class="line">    ...</span><br><span class="line">    ...</span><br><span class="line">  <span class="built_in">command</span> N</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<p>示例：</p>
<img src="images/image-20230713152826213.png" alt="image-20230713152826213" style="zoom:67%;" />

<p><code>if-else</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ condition-is-true ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">  <span class="built_in">command</span> 1</span><br><span class="line"><span class="keyword">elif</span> [ condition-is-true ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">  <span class="built_in">command</span> 2</span><br><span class="line"><span class="keyword">elif</span> [ condition-is-true ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">  <span class="built_in">command</span> 3</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  <span class="built_in">command</span> 4</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<p>2.<code>case</code>语句</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">&quot;<span class="variable">$VAR</span>&quot;</span> <span class="keyword">in</span></span><br><span class="line">  pattern_1)</span><br><span class="line">    <span class="comment"># commands when $VAR matches pattern 1</span></span><br><span class="line">    ;;</span><br><span class="line">  pattern_2)</span><br><span class="line">    <span class="comment"># commands when $VAR matches pattern 2</span></span><br><span class="line">    ;;</span><br><span class="line">  *)</span><br><span class="line">    <span class="comment"># This will run if $VAR doesnt match any of the given patterns</span></span><br><span class="line">    ;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>

<p>示例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;Enter the answer in Y/N: &quot;</span> ANSWER</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;<span class="variable">$ANSWER</span>&quot;</span> <span class="keyword">in</span></span><br><span class="line">[yY] | [yY][eE][sS])</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;The answer is Yes. &quot;</span></span><br><span class="line">  ;;</span><br><span class="line">[nN] | [nN][oO])</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;The answer is NO. &quot;</span></span><br><span class="line">  ;;</span><br><span class="line">*)</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;Invalid Answer .&quot;</span></span><br><span class="line">  ;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>

<h6 id="3-1-6-循环语句"><a href="#3-1-6-循环语句" class="headerlink" title="3.1.6 循环语句"></a>3.1.6 循环语句</h6><p>1.<code>for</code>循环</p>
<p>语法：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> VARIABLE_NAME <span class="keyword">in</span> ITEM_1 ITEM_N</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  <span class="built_in">command</span> 1</span><br><span class="line">  <span class="built_in">command</span> 2</span><br><span class="line">    ...</span><br><span class="line">    ...</span><br><span class="line">  <span class="built_in">command</span> N</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p>示例1：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">COLORS=<span class="string">&quot;red green blue&quot;</span></span><br><span class="line">COLORS2=<span class="string">&quot;yellow black&quot;</span></span><br><span class="line"><span class="keyword">for</span> COLOR <span class="keyword">in</span> <span class="variable">$COLORS</span> <span class="variable">$COLORS2</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;The color is <span class="variable">$COLOR</span>&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p>示例2：C式<code>for</code>循环</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">N=10</span><br><span class="line"><span class="keyword">for</span> ((I=<span class="number">0</span>;I&lt;N;I++)) </span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;now I = <span class="variable">$I</span>&quot;</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p>2.<code>while</code>循环</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> [ CONNDITION_IS_TRUE ]</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  <span class="comment"># Commands will change he entry condition</span></span><br><span class="line">  <span class="built_in">command</span> 1</span><br><span class="line">  <span class="built_in">command</span> 2</span><br><span class="line">    ...</span><br><span class="line">    ...</span><br><span class="line">  <span class="built_in">command</span> N</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h6 id="3-1-7-参数传递"><a href="#3-1-7-参数传递" class="headerlink" title="3.1.7 参数传递"></a>3.1.7 参数传递</h6><p>作用：运行脚本时，可以传递参数给脚本内部使用</p>
<p>参数：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">参数			   含义</span><br><span class="line">$0				取出脚本的名字</span><br><span class="line">$n				取出第n个参数的名字</span><br><span class="line">$#				统计总共有几个参数</span><br><span class="line">$*				获取所有位置的参数</span><br></pre></td></tr></table></figure>

<img src="images/image-20230713144320757.png" alt="image-20230713144320757" style="zoom:50%;" />

<p>例子：</p>
<img src="images/image-20230713144655911.png" alt="image-20230713144655911" style="zoom:67%;" />

<h5 id="3-2-shell脚本示例"><a href="#3-2-shell脚本示例" class="headerlink" title="3.2 shell脚本示例"></a>3.2 shell脚本示例</h5><h6 id="3-2-1-j5平台的启动脚本"><a href="#3-2-1-j5平台的启动脚本" class="headerlink" title="3.2.1 j5平台的启动脚本"></a>3.2.1 j5平台的启动脚本</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">function source_x86 &#123;</span><br><span class="line">    cd platform_sdk/x86/ || exit</span><br><span class="line">    source export_env.sh</span><br><span class="line">    cd - || exit</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function source_j5 &#123;</span><br><span class="line">    cd platform_sdk/J5/ || exit</span><br><span class="line">    source export_env.sh</span><br><span class="line">    cd - || exit</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function source_x9u &#123;</span><br><span class="line">    route add -net 224.0.0.0 netmask 255.255.255.0 eth0</span><br><span class="line">    cd platform_sdk/x9u/ || exit</span><br><span class="line">    source export_env.sh</span><br><span class="line">    cd - || exit</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function run_exe() &#123;</span><br><span class="line">    cd build/&quot;$1&quot;/ || exit</span><br><span class="line">    ./&quot;$1&quot;</span><br><span class="line">    cd - || exit</span><br><span class="line">&#125;</span><br><span class="line">if [ &quot;$1&quot; == &quot;x86&quot; ]; then</span><br><span class="line">  echo &quot;run $2 in x86 platform&quot;</span><br><span class="line">  source_x86</span><br><span class="line">  run_exe &quot;$2&quot;</span><br><span class="line">elif [ &quot;$1&quot; == &quot;j5&quot; ]; then</span><br><span class="line">  echo &quot;run $2 in j5 platform&quot;</span><br><span class="line">  source_j5</span><br><span class="line">  run_exe &quot;$2&quot;</span><br><span class="line">elif [ &quot;$1&quot; == &quot;x9u&quot; ]; then</span><br><span class="line">  echo &quot;run $2 in x86 platform&quot;</span><br><span class="line">  source_x9u</span><br><span class="line">  run_exe &quot;$2&quot;</span><br><span class="line">else</span><br><span class="line">  echo &quot;Invalid input. Please provide valid input such as:&quot;</span><br><span class="line">  echo &quot;./run.sh x86 apa_plan&quot;</span><br><span class="line">  echo &quot;./run.sh j5 apa_plan&quot;</span><br><span class="line">  echo &quot;./run.sh x9u apa_plan&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>



<h4 id="4-docker"><a href="#4-docker" class="headerlink" title="4 docker"></a>4 docker</h4><h5 id="4-1-安装"><a href="#4-1-安装" class="headerlink" title="4.1 安装"></a>4.1 安装</h5><h6 id="4-1-1-docker的安装"><a href="#4-1-1-docker的安装" class="headerlink" title="4.1.1 docker的安装"></a>4.1.1 docker的安装</h6><p><code>sudo apt install docker.io</code></p>
<h6 id="4-1-2-安装后的实用操作"><a href="#4-1-2-安装后的实用操作" class="headerlink" title="4.1.2 安装后的实用操作"></a>4.1.2 安装后的实用操作</h6><p><strong>1.如何避免每次使用sudo</strong></p>
<blockquote>
<p>问题描述：创建非root用户访问后，就不需要每次在docker命令前加sudo</p>
</blockquote>
<p>解决方法：<br>(1)首先创建docker用户组，如果docker用户组存在可以忽略</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo groupadd docker</span><br></pre></td></tr></table></figure>

<p>(2)把用户添加进docker组中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gpasswd -a $&#123;USER&#125; docker</span><br></pre></td></tr></table></figure>

<p>(3)重启docker（最好logout一次）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service docker restart</span><br></pre></td></tr></table></figure>

<p>(4)如果普通用户执行docker命令，如果提示get …… dial unix &#x2F;var&#x2F;run&#x2F;docker.sock权限不够，则修改&#x2F;var&#x2F;run&#x2F;docker.sock权限使用root用户执行如下命令，即可</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chmod a+rw /var/run/docker.sock</span><br></pre></td></tr></table></figure>

<p><strong>2.修改docker的默认储存路径</strong></p>
<blockquote>
<p> 问题描述：docker默认会使用&#x2F;var&#x2F;lib&#x2F;docker&#x2F;目录作为存储目录，用以存放拉取的镜像和创建的容器等。不过由于此目录一般都位于系统盘，遇到系统盘比较小，而镜像和容器多了后就容易尴尬</p>
</blockquote>
<p>解决方法：</p>
<p>(1)在命令行输入docker info查看docker的相关配置信息，其中Docker Root Dir条目就是储存目录</p>
<p>(2)官方文档的修改办法是编辑 &#x2F;etc&#x2F;docker&#x2F;daemon.json 文件，p.s.这个文件默认是没有的，需要创建一个</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit /etc/docker/daemon.json</span><br></pre></td></tr></table></figure>

<p>(3)写入以下内容，p.s.第一行是docker默认源的设定</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;registry-mirrors&quot;: [&quot;https://docker.m.daocloud.io&quot;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>(4)保存并退出daemon.json，然后重启 docker 服务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure>

<p>(5)再次查看docker info，可以看到默认储存路径已经修改</p>
<p><strong>3.docker容器中<code>TAB</code>无法补全</strong></p>
<p>(1)解决bash中命令无法补全的问题：</p>
<ol>
<li><p>安装bash-complete</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install -y bash-completion</span><br></pre></td></tr></table></figure>


</li>
<li><p>确认容器中使用的终端是否是bash，如果不是，则要改成bash。如果返回的是bash，则直接跳到第3步</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> -l /bin/sh 			<span class="comment"># 如果返回/bin/sh-&gt;dash，那么说明需要将其改成bash。</span></span><br><span class="line">dpkg-reconfigure dash 	<span class="comment"># 选择no</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>使bash_completion生效</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> /usr/share/bash-completion/bash_completion <span class="comment"># 如果提示没有权限，使用chmod修改一下即可</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>去除<code>/etc/bash.bashrc</code>中的注释</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># vi /etc/bash.bashrc</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># enable bash completion in interactive shells</span></span><br><span class="line"><span class="keyword">if</span> ! <span class="built_in">shopt</span> -oq posix; <span class="keyword">then</span></span><br><span class="line"> <span class="keyword">if</span> [ -f /usr/share/bash-completion/bash_completion ]; <span class="keyword">then</span></span><br><span class="line">   . /usr/share/bash-completion/bash_completion</span><br><span class="line"> <span class="keyword">elif</span> [ -f /etc/bash_completion ]; <span class="keyword">then</span></span><br><span class="line">   . /etc/bash_completion</span><br><span class="line"> <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>重启docker容器即可</p>
</li>
</ol>
<p>(2)解决<code>apt install &lt;包名&gt;</code>时，包名无法补全的问题</p>
<p>docker容器中有个<code>docker-clean</code>负责清除apt缓存以减小docker容器的容积，正因为此，包名才无法补全</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> /etc/apt/apt.conf.d/docker-clean</span><br><span class="line">apt update</span><br></pre></td></tr></table></figure>

<h5 id="4-2-docker的常用操作"><a href="#4-2-docker的常用操作" class="headerlink" title="4.2 docker的常用操作"></a>4.2 docker的常用操作</h5><h6 id="4-2-1-查看镜像、容器、数据卷所占用的空间"><a href="#4-2-1-查看镜像、容器、数据卷所占用的空间" class="headerlink" title="4.2.1 查看镜像、容器、数据卷所占用的空间"></a>4.2.1 查看镜像、容器、数据卷所占用的空间</h6><p><code>docker system df</code></p>
<h6 id="4-2-2-复制主机文件夹到docker容器"><a href="#4-2-2-复制主机文件夹到docker容器" class="headerlink" title="4.2.2 复制主机文件夹到docker容器"></a>4.2.2 复制主机文件夹到docker容器</h6><p>使用<code>docker cp</code>命令</p>
<p>语法：<code>docker cp &lt;本地文件夹路径&gt; &lt;容器名称或ID&gt;:&lt;容器目标路径&gt;</code></p>
<h5 id="4-3-镜像相关"><a href="#4-3-镜像相关" class="headerlink" title="4.3 镜像相关"></a>4.3 镜像相关</h5><h6 id="4-3-1-列出镜像"><a href="#4-3-1-列出镜像" class="headerlink" title="4.3.1 列出镜像"></a>4.3.1 列出镜像</h6><p><code>docker image ls -a</code>列出所有镜像</p>
<h6 id="4-3-2-加载本地镜像"><a href="#4-3-2-加载本地镜像" class="headerlink" title="4.3.2 加载本地镜像"></a>4.3.2 加载本地镜像</h6><p><code>docker load -i &quot;镜像名称&quot;</code></p>
<p><code>docker import &lt;镜像名称&gt; &lt;REPOSITORY:TAG&gt;</code>推荐</p>
<p><img src="/images/image-20230816154758363.png" alt="image-20230816154758363"></p>
<p><em>用户既可以使用 <code>docker load</code> 来导入镜像存储文件到本地镜像库，也可以使用 <code>docker import</code> 来导入一个容器快照到本地镜像库。这两者的区别在于容器快照文件将丢弃所有的历史记录和元数据信息（即仅保存容器当时的快照状态），而镜像存储文件将保存完整记录，体积也要大。此外，从容器快照文件导入时可以重新指定标签等元数据信息。</em></p>
<h6 id="4-3-3-删除镜像"><a href="#4-3-3-删除镜像" class="headerlink" title="4.3.3 删除镜像"></a>4.3.3 删除镜像</h6><p><code>docker image rm &lt;镜像id&gt;</code></p>
<p>p.s. 如果遇到镜像有子镜像<code>image has dependent child images</code>。</p>
<ol>
<li>先用<code>docker image inspect --format=&#39;&#123;&#123;.RepoTags&#125;&#125; &#123;&#123;.Id&#125;&#125; &#123;&#123;.Parent&#125;&#125;&#39; $(docker image ls -q --filter since=镜像Id)</code>查询镜像的依赖</li>
<li>然后逐层删除即可</li>
</ol>
<h5 id="4-4-容器相关"><a href="#4-4-容器相关" class="headerlink" title="4.4 容器相关"></a>4.4 容器相关</h5><h6 id="4-4-1-创建容器"><a href="#4-4-1-创建容器" class="headerlink" title="4.4.1 创建容器"></a>4.4.1 创建容器</h6><p>使用<code>docker run</code>来创建一个新容器</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --name <span class="string">&quot;x9u_a&quot;</span> --network=host --privileged -w /home/hyh -v /home/hyh:/home/hyh -v /mnt:/mnt &lt;镜像ID&gt; /bin/bash</span><br><span class="line"><span class="comment"># 名词解释</span></span><br><span class="line">--name  			给容器取的名字</span><br><span class="line">-w 					&lt;path&gt; 容器启动后的工作路径</span><br><span class="line">-v 					主机路径:容器路径 将主机的路径挂载（共享）到容器的路径</span><br><span class="line">--privileged 		给容器赋予真正的root权限</span><br><span class="line">--network=host      容器内联网</span><br></pre></td></tr></table></figure>

<p><strong>补充知识：</strong></p>
<p>如果在x86架构下无法创建arm架构的容器的话，可以用QEMU来跨平台运行</p>
<p>①在 <a target="_blank" rel="noopener" href="https://github.com/multiarch/qemu-user-static/releases">https://github.com/multiarch/qemu-user-static/releases</a> 下载qemu-xxx-static文件，注意要根据自己平台选择，如arm64是qemu-aarch64-static，arm32是qemu-arm-static，选错文件后面的步骤会失败。</p>
<p>②拷贝文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> qemu-aarch64-static /usr/bin/</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">chmod</span> +x /usr/bin/qemu-aarch64-static</span><br></pre></td></tr></table></figure>

<p>③运行QEMU</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --<span class="built_in">rm</span> --privileged multiarch/qemu-user-static:register</span><br></pre></td></tr></table></figure>

<p>④然后就可以用docker run&#x2F;restart来创建&#x2F;重启容器</p>
<h6 id="4-4-2-运行容器"><a href="#4-4-2-运行容器" class="headerlink" title="4.4.2 运行容器"></a>4.4.2 运行容器</h6><p>(1)查找容器的id</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker container ls -a</span><br></pre></td></tr></table></figure>

<p>(2)重启并运行容器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker container restart &lt;容器id&gt;</span><br><span class="line">docker exec -it --user=root &quot;容器别名&quot; /bin/bash</span><br></pre></td></tr></table></figure>

<h6 id="4-4-3-容器导出容器快照"><a href="#4-4-3-容器导出容器快照" class="headerlink" title="4.4.3 容器导出容器快照"></a>4.4.3 容器导出容器快照</h6><p><code>docker container export &lt;容器id&gt; &gt; xxx.tar</code></p>
<h6 id="4-4-4-删除容器"><a href="#4-4-4-删除容器" class="headerlink" title="4.4.4 删除容器"></a>4.4.4 删除容器</h6><p><code>docker container rm &lt;容器id&gt;</code></p>
<h6 id="4-4-5-将容器保存为镜像"><a href="#4-4-5-将容器保存为镜像" class="headerlink" title="4.4.5 将容器保存为镜像"></a>4.4.5 将容器保存为镜像</h6><p>使用<code>docker commit</code>命令可以将容器的储存层+原有镜像保存为新的镜像，这个新镜像拥有原容器最后的文件的变化。</p>
<p>语法为：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker commit [选项] &lt;容器ID或容器名&gt; [&lt;仓库名&gt;[:&lt;标签&gt;]]</span><br></pre></td></tr></table></figure>

<p>例如：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker commit --author &quot;HuYunhao&quot; --message &quot;J5 x9u a build image&quot; b36f55 x9u:a</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">--author 指定作者</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">--message 记录本次修改的内容</span></span><br></pre></td></tr></table></figure>

<h5 id="4-5-Harbor云"><a href="#4-5-Harbor云" class="headerlink" title="4.5 Harbor云"></a>4.5 Harbor云</h5><h6 id="4-5-1-添加本地配置"><a href="#4-5-1-添加本地配置" class="headerlink" title="4.5.1 添加本地配置"></a>4.5.1 添加本地配置</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/docker/daemon.json        # 编辑docker配置文件</span><br></pre></td></tr></table></figure>

<p>在daemon.json文件中添加如下内容：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;insecure-registries&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;52.130.154.126:8098&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>保存后重启<code>docker</code>服务后生效</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart docker           # 重启docker服务</span><br></pre></td></tr></table></figure>

<h5 id="4-6-DockerFile"><a href="#4-6-DockerFile" class="headerlink" title="4.6 DockerFile"></a>4.6 DockerFile</h5><h6 id="4-6-1-运行DockerFile命令"><a href="#4-6-1-运行DockerFile命令" class="headerlink" title="4.6.1 运行DockerFile命令"></a>4.6.1 运行DockerFile命令</h6><p><code>docker build --network=host -t v140:v1 .</code></p>
<h4 id="5-vi"><a href="#5-vi" class="headerlink" title="5 vi"></a>5 vi</h4><h5 id="5-1-vi的三种模式"><a href="#5-1-vi的三种模式" class="headerlink" title="5.1 vi的三种模式"></a>5.1 vi的三种模式</h5><img src="images/image-20230925141712412.png" alt="image-20230925141712412" style="zoom:67%;" />

<h5 id="5-2-命令模式"><a href="#5-2-命令模式" class="headerlink" title="5.2 命令模式"></a>5.2 命令模式</h5><p>任何时候，不管用户处于何种模式，按下Esc键即可进入命令模式。按下<code>u</code>去撤销操作。</p>
<h6 id="5-2-1-光标移动"><a href="#5-2-1-光标移动" class="headerlink" title="5.2.1 光标移动"></a>5.2.1 光标移动</h6><p>上下左右移动：<code>方向键</code>。还可以先按下数字，再按方向键。比如<code>2</code>+<code>方向上</code>-&gt;向上移动两行</p>
<p>翻页：<code>Page Up</code>和<code>Page Down</code></p>
<p>移动至指定行：先输入行号如<code>234</code>，再按<code>shift</code>+<code>G</code></p>
<p>移动到本行行首：输入数字<code>0</code></p>
<p>移动到本行行末：<code>shift</code>+<code>4</code></p>
<p>移动到文件的最后一行：<code>shift</code>+<code>G</code></p>
<h6 id="5-2-2-插入行"><a href="#5-2-2-插入行" class="headerlink" title="5.2.2 插入行"></a>5.2.2 插入行</h6><p>向当前行上面插入一行：大写<code>O</code></p>
<p>向当前行下面插入一行：小写<code>o</code></p>
<p>同样的，可以先按数字，再按字母，插入多行。</p>
<h6 id="5-2-3-删除文本"><a href="#5-2-3-删除文本" class="headerlink" title="5.2.3 删除文本"></a>5.2.3 删除文本</h6><table>
<thead>
<tr>
<th align="center">命令</th>
<th align="center">删除内容</th>
</tr>
</thead>
<tbody><tr>
<td align="center">x</td>
<td align="center">当前字符</td>
</tr>
<tr>
<td align="center">3x</td>
<td align="center">当前字符和之后的两个字符</td>
</tr>
<tr>
<td align="center">dd</td>
<td align="center">当前行</td>
</tr>
<tr>
<td align="center">5dd</td>
<td align="center">当前行和之后的4行</td>
</tr>
<tr>
<td align="center">d$</td>
<td align="center">当前字符到当前行末尾</td>
</tr>
<tr>
<td align="center">d0</td>
<td align="center">当前字符到当前行开始</td>
</tr>
<tr>
<td align="center">dG</td>
<td align="center">当前行到文件末尾</td>
</tr>
<tr>
<td align="center">d20G</td>
<td align="center">当前行到文件第20行之间的行</td>
</tr>
</tbody></table>
<h6 id="5-2-4-剪切，复制，粘贴"><a href="#5-2-4-剪切，复制，粘贴" class="headerlink" title="5.2.4 剪切，复制，粘贴"></a>5.2.4 剪切，复制，粘贴</h6><p>剪切：其实d相关的命令不是删除文本，而是在“剪切”文本。</p>
<p>粘贴：使用<code>P</code>将内容复制到光标前，使用<code>p</code>将内容复制到光标后。</p>
<p>复制：字母<code>y</code>是来复制文本的，用法和d一致</p>
<table>
<thead>
<tr>
<th align="center">命令</th>
<th align="center">复制内容</th>
</tr>
</thead>
<tbody><tr>
<td align="center">yy</td>
<td align="center">当前行</td>
</tr>
<tr>
<td align="center">5yy</td>
<td align="center">当前行以及接下来的4行</td>
</tr>
<tr>
<td align="center">y$</td>
<td align="center">当前字符直到当前行末尾</td>
</tr>
<tr>
<td align="center">y0</td>
<td align="center">当前字符直到当前行开头</td>
</tr>
<tr>
<td align="center">yG</td>
<td align="center">当前行到文件末尾</td>
</tr>
<tr>
<td align="center">y20G</td>
<td align="center">当前行和文件第20行之间的内容</td>
</tr>
</tbody></table>
<h6 id="5-2-5-合并行"><a href="#5-2-5-合并行" class="headerlink" title="5.2.5 合并行"></a>5.2.5 合并行</h6><p>使用大写<code>J</code>来将此行和下一行合并。</p>
<h5 id="5-3-编辑模式"><a href="#5-3-编辑模式" class="headerlink" title="5.3 编辑模式"></a>5.3 编辑模式</h5><p>在命令模式下输入插入命令<code>i</code>、附加命令<code>a</code>等，即可进入编辑模式。</p>
<h5 id="5-4-末行模式"><a href="#5-4-末行模式" class="headerlink" title="5.4 末行模式"></a>5.4 末行模式</h5><p>在命令模式下输入<code>:</code>即可进入末行模式，然后输入相应指令即可。</p>
<p>显示行号：输入<code>set nu</code></p>
<h6 id="5-4-1-查找和替换"><a href="#5-4-1-查找和替换" class="headerlink" title="5.4.1 查找和替换"></a>5.4.1 查找和替换</h6><p>查找：在命令行模式下，使用<code>/</code>进入查找，输入需要查找的字符后，按<code>Enter</code>进入第一个匹配处，此时按下<code>n</code>可以查找后续的匹配字符。</p>
<p>替换：</p>
<p>文件的内容如下</p>
<p><img src="/images/image-20230925154348140.png" alt="image-20230925154348140"></p>
<p>想要替换3-5行的<code>Apple</code>为<code>apple</code>，输入命令<code>3,5s/Apple/apple/g</code>即可。</p>
<img src="images/image-20230925154523626.png" alt="image-20230925154523626" style="zoom: 80%;" />

<p>命令解析：</p>
<table>
<thead>
<tr>
<th align="center">组成</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">:</td>
<td align="center">末行模式开启</td>
</tr>
<tr>
<td align="center">3，5</td>
<td align="center">替换3-5行的内容。还可以用%，%意味着替换整个文本</td>
</tr>
<tr>
<td align="center">s</td>
<td align="center">代表的本次的操作是搜索并且替换</td>
</tr>
<tr>
<td align="center">&#x2F;Apple&#x2F;apple</td>
<td align="center">搜索的文本&#x2F;替换的文本</td>
</tr>
<tr>
<td align="center">g</td>
<td align="center">代指global，如果不加上g的话，那么只替换每一行中第一个符合要求的字符串</td>
</tr>
</tbody></table>
<h5 id="5-5-常见问题"><a href="#5-5-常见问题" class="headerlink" title="5.5 常见问题"></a>5.5 常见问题</h5><h6 id="5-5-1-vi编辑器卡死"><a href="#5-5-1-vi编辑器卡死" class="headerlink" title="5.5.1 vi编辑器卡死"></a>5.5.1 vi编辑器卡死</h6><p>我们在使用vi编辑器时，有时可能出现编辑器卡死的状态，不能输入，不能退出。其实这不是vi编辑器卡死，而是不小心把vi编辑器锁定了，编辑器处于假死状态，这时vi只是停止向终端输出而已。<br>原因是在windows下，总是会习惯性的按<code>Ctrl</code>+<code>S</code>来保存文件，但在用vi时，一按<code>ctrl</code>+<code>S</code>就会“卡死”，什么都动不了。要想退出这种状态，只需按<code>Ctrl</code>+ <code>Q</code> 即可恢复正常。</p>
<h5 id="6-Perf-火焰图"><a href="#6-Perf-火焰图" class="headerlink" title="6 Perf 火焰图"></a>6 Perf 火焰图</h5>
    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E5%AE%89%E8%A3%85/" rel="tag"># 安装</a>
              <a href="/tags/ubuntu/" rel="tag"># ubuntu</a>
              <a href="/tags/%E9%85%8D%E7%BD%AE/" rel="tag"># 配置</a>
              <a href="/tags/%E9%97%AE%E9%A2%98/" rel="tag"># 问题</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2024/01/01/other_tools/wsl2/" rel="prev" title="WSL2">
      <i class="fa fa-chevron-left"></i> WSL2
    </a></div>
      <div class="post-nav-item">
    <a href="/2024/01/01/other_tools/gdbNote/" rel="next" title="gdb笔记">
      gdb笔记 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-ubuntu%E5%9F%BA%E7%A1%80"><span class="nav-number">1.</span> <span class="nav-text">1. ubuntu基础</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-1-%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85"><span class="nav-number">1.1.</span> <span class="nav-text">1.1 系统安装</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#1-2-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98"><span class="nav-number">1.2.</span> <span class="nav-text">1.2 常见问题</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#1-2-1-ubuntu%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%97%A0%E7%BD%91%E7%BB%9C"><span class="nav-number">1.2.1.</span> <span class="nav-text">1.2.1 ubuntu虚拟机无网络</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#1-2-2-%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%92%8C%E5%AE%BF%E4%B8%BB%E6%9C%BA%E6%97%A0%E6%B3%95%E5%A4%8D%E5%88%B6%E7%B2%98%E8%B4%B4"><span class="nav-number">1.2.2.</span> <span class="nav-text">1.2.2 虚拟机和宿主机无法复制粘贴</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#1-2-3-%E8%AE%BE%E7%BD%AE%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="nav-number">1.2.3.</span> <span class="nav-text">1.2.3 设置共享文件夹</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#1-2-4-%E5%90%AF%E7%94%A8ssh%E6%9C%8D%E5%8A%A1"><span class="nav-number">1.2.4.</span> <span class="nav-text">1.2.4 启用ssh服务</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#1-2-5-ubuntu%E5%8F%8C%E5%B1%8F%E6%98%BE%E7%A4%BA%E9%97%AE%E9%A2%98"><span class="nav-number">1.2.5.</span> <span class="nav-text">1.2.5 ubuntu双屏显示问题</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#1-3-%E8%BD%AF%E4%BB%B6%E5%8D%B8%E8%BD%BD"><span class="nav-number">1.3.</span> <span class="nav-text">1.3 软件卸载</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-linux%E5%9F%BA%E7%A1%80"><span class="nav-number">2.</span> <span class="nav-text">2. linux基础</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#2-1-%E5%B8%B8%E7%94%A8shell%E5%91%BD%E4%BB%A4"><span class="nav-number">2.1.</span> <span class="nav-text">2.1 常用shell命令</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#2-1-1-echo"><span class="nav-number">2.1.1.</span> <span class="nav-text">2.1.1 echo</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-1-2-date"><span class="nav-number">2.1.2.</span> <span class="nav-text">2.1.2 date</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-1-3-ps"><span class="nav-number">2.1.3.</span> <span class="nav-text">2.1.3 ps</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-1-4-top"><span class="nav-number">2.1.4.</span> <span class="nav-text">2.1.4 top</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-1-5-pidof"><span class="nav-number">2.1.5.</span> <span class="nav-text">2.1.5 pidof</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-1-6-kill"><span class="nav-number">2.1.6.</span> <span class="nav-text">2.1.6 kill</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-1-7-history"><span class="nav-number">2.1.7.</span> <span class="nav-text">2.1.7 history</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-1-8-find"><span class="nav-number">2.1.8.</span> <span class="nav-text">2.1.8 find</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-1-9-cat"><span class="nav-number">2.1.9.</span> <span class="nav-text">2.1.9 cat</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-1-10-touch"><span class="nav-number">2.1.10.</span> <span class="nav-text">2.1.10 touch</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-1-11-mv"><span class="nav-number">2.1.11.</span> <span class="nav-text">2.1.11 mv</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-1-12-tar"><span class="nav-number">2.1.12.</span> <span class="nav-text">2.1.12 tar</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-1-13-tee"><span class="nav-number">2.1.13.</span> <span class="nav-text">2.1.13 tee</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-1-14-scp"><span class="nav-number">2.1.14.</span> <span class="nav-text">2.1.14 scp</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-1-15-ln"><span class="nav-number">2.1.15.</span> <span class="nav-text">2.1.15 ln</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-1-16-cd"><span class="nav-number">2.1.16.</span> <span class="nav-text">2.1.16 cd</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-1-17-file"><span class="nav-number">2.1.17.</span> <span class="nav-text">2.1.17 file</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-1-18-less"><span class="nav-number">2.1.18.</span> <span class="nav-text">2.1.18 less</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-1-19-type"><span class="nav-number">2.1.19.</span> <span class="nav-text">2.1.19 type</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-1-20-alias"><span class="nav-number">2.1.20.</span> <span class="nav-text">2.1.20 alias</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-1-21-perf"><span class="nav-number">2.1.21.</span> <span class="nav-text">2.1.21 perf</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-2-%E5%AE%9E%E7%94%A8%E8%B0%83%E8%AF%95"><span class="nav-number">2.2.</span> <span class="nav-text">2.2 实用调试</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#2-2-1-%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91"><span class="nav-number">2.2.1.</span> <span class="nav-text">2.2.1 输出重定向</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-2-2-%E7%AE%A1%E9%81%93%E7%AC%A6"><span class="nav-number">2.2.2.</span> <span class="nav-text">2.2.2 管道符</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-2-3-%E5%91%BD%E4%BB%A4%E9%80%9A%E9%85%8D%E7%AC%A6"><span class="nav-number">2.2.3.</span> <span class="nav-text">2.2.3 命令通配符</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-2-4-%E8%BD%AC%E4%B9%89%E5%AD%97%E7%AC%A6"><span class="nav-number">2.2.4.</span> <span class="nav-text">2.2.4 转义字符</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-2-5-%E5%B8%B8%E7%94%A8%E5%8F%98%E9%87%8F"><span class="nav-number">2.2.5.</span> <span class="nav-text">2.2.5 常用变量</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#2-2-6-%E4%BD%BF%E7%94%A8TDA4%E7%9A%84GDB"><span class="nav-number">2.2.6.</span> <span class="nav-text">2.2.6 使用TDA4的GDB</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-3-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98"><span class="nav-number">2.3.</span> <span class="nav-text">2.3 常见问题</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#2-3-1-%E9%87%8D%E5%AE%9A%E5%90%91%E6%9D%83%E9%99%90%E4%B8%8D%E5%A4%9F"><span class="nav-number">2.3.1.</span> <span class="nav-text">2.3.1 重定向权限不够</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-shell%E8%84%9A%E6%9C%AC"><span class="nav-number">3.</span> <span class="nav-text">3. shell脚本</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#3-1-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="nav-number">3.1.</span> <span class="nav-text">3.1 基本概念</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#3-1-1-%E6%B3%A8%E9%87%8A"><span class="nav-number">3.1.1.</span> <span class="nav-text">3.1.1 注释</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3-1-2-%E6%8C%87%E5%AE%9A%E8%A7%A3%E9%87%8A%E5%99%A8"><span class="nav-number">3.1.2.</span> <span class="nav-text">3.1.2 指定解释器</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3-1-3-%E5%8F%98%E9%87%8F"><span class="nav-number">3.1.3.</span> <span class="nav-text">3.1.3 变量</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3-1-4-%E6%9D%A1%E4%BB%B6%E6%B5%8B%E8%AF%95%E8%AF%AD%E5%8F%A5"><span class="nav-number">3.1.4.</span> <span class="nav-text">3.1.4 条件测试语句</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3-1-5-%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5"><span class="nav-number">3.1.5.</span> <span class="nav-text">3.1.5 条件语句</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3-1-6-%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5"><span class="nav-number">3.1.6.</span> <span class="nav-text">3.1.6 循环语句</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#3-1-7-%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92"><span class="nav-number">3.1.7.</span> <span class="nav-text">3.1.7 参数传递</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-2-shell%E8%84%9A%E6%9C%AC%E7%A4%BA%E4%BE%8B"><span class="nav-number">3.2.</span> <span class="nav-text">3.2 shell脚本示例</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#3-2-1-j5%E5%B9%B3%E5%8F%B0%E7%9A%84%E5%90%AF%E5%8A%A8%E8%84%9A%E6%9C%AC"><span class="nav-number">3.2.1.</span> <span class="nav-text">3.2.1 j5平台的启动脚本</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-docker"><span class="nav-number">4.</span> <span class="nav-text">4 docker</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#4-1-%E5%AE%89%E8%A3%85"><span class="nav-number">4.1.</span> <span class="nav-text">4.1 安装</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#4-1-1-docker%E7%9A%84%E5%AE%89%E8%A3%85"><span class="nav-number">4.1.1.</span> <span class="nav-text">4.1.1 docker的安装</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4-1-2-%E5%AE%89%E8%A3%85%E5%90%8E%E7%9A%84%E5%AE%9E%E7%94%A8%E6%93%8D%E4%BD%9C"><span class="nav-number">4.1.2.</span> <span class="nav-text">4.1.2 安装后的实用操作</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-2-docker%E7%9A%84%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C"><span class="nav-number">4.2.</span> <span class="nav-text">4.2 docker的常用操作</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#4-2-1-%E6%9F%A5%E7%9C%8B%E9%95%9C%E5%83%8F%E3%80%81%E5%AE%B9%E5%99%A8%E3%80%81%E6%95%B0%E6%8D%AE%E5%8D%B7%E6%89%80%E5%8D%A0%E7%94%A8%E7%9A%84%E7%A9%BA%E9%97%B4"><span class="nav-number">4.2.1.</span> <span class="nav-text">4.2.1 查看镜像、容器、数据卷所占用的空间</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4-2-2-%E5%A4%8D%E5%88%B6%E4%B8%BB%E6%9C%BA%E6%96%87%E4%BB%B6%E5%A4%B9%E5%88%B0docker%E5%AE%B9%E5%99%A8"><span class="nav-number">4.2.2.</span> <span class="nav-text">4.2.2 复制主机文件夹到docker容器</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-3-%E9%95%9C%E5%83%8F%E7%9B%B8%E5%85%B3"><span class="nav-number">4.3.</span> <span class="nav-text">4.3 镜像相关</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#4-3-1-%E5%88%97%E5%87%BA%E9%95%9C%E5%83%8F"><span class="nav-number">4.3.1.</span> <span class="nav-text">4.3.1 列出镜像</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4-3-2-%E5%8A%A0%E8%BD%BD%E6%9C%AC%E5%9C%B0%E9%95%9C%E5%83%8F"><span class="nav-number">4.3.2.</span> <span class="nav-text">4.3.2 加载本地镜像</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4-3-3-%E5%88%A0%E9%99%A4%E9%95%9C%E5%83%8F"><span class="nav-number">4.3.3.</span> <span class="nav-text">4.3.3 删除镜像</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-4-%E5%AE%B9%E5%99%A8%E7%9B%B8%E5%85%B3"><span class="nav-number">4.4.</span> <span class="nav-text">4.4 容器相关</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#4-4-1-%E5%88%9B%E5%BB%BA%E5%AE%B9%E5%99%A8"><span class="nav-number">4.4.1.</span> <span class="nav-text">4.4.1 创建容器</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4-4-2-%E8%BF%90%E8%A1%8C%E5%AE%B9%E5%99%A8"><span class="nav-number">4.4.2.</span> <span class="nav-text">4.4.2 运行容器</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4-4-3-%E5%AE%B9%E5%99%A8%E5%AF%BC%E5%87%BA%E5%AE%B9%E5%99%A8%E5%BF%AB%E7%85%A7"><span class="nav-number">4.4.3.</span> <span class="nav-text">4.4.3 容器导出容器快照</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4-4-4-%E5%88%A0%E9%99%A4%E5%AE%B9%E5%99%A8"><span class="nav-number">4.4.4.</span> <span class="nav-text">4.4.4 删除容器</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#4-4-5-%E5%B0%86%E5%AE%B9%E5%99%A8%E4%BF%9D%E5%AD%98%E4%B8%BA%E9%95%9C%E5%83%8F"><span class="nav-number">4.4.5.</span> <span class="nav-text">4.4.5 将容器保存为镜像</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-5-Harbor%E4%BA%91"><span class="nav-number">4.5.</span> <span class="nav-text">4.5 Harbor云</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#4-5-1-%E6%B7%BB%E5%8A%A0%E6%9C%AC%E5%9C%B0%E9%85%8D%E7%BD%AE"><span class="nav-number">4.5.1.</span> <span class="nav-text">4.5.1 添加本地配置</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-6-DockerFile"><span class="nav-number">4.6.</span> <span class="nav-text">4.6 DockerFile</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#4-6-1-%E8%BF%90%E8%A1%8CDockerFile%E5%91%BD%E4%BB%A4"><span class="nav-number">4.6.1.</span> <span class="nav-text">4.6.1 运行DockerFile命令</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-vi"><span class="nav-number">5.</span> <span class="nav-text">5 vi</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#5-1-vi%E7%9A%84%E4%B8%89%E7%A7%8D%E6%A8%A1%E5%BC%8F"><span class="nav-number">5.1.</span> <span class="nav-text">5.1 vi的三种模式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-2-%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F"><span class="nav-number">5.2.</span> <span class="nav-text">5.2 命令模式</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#5-2-1-%E5%85%89%E6%A0%87%E7%A7%BB%E5%8A%A8"><span class="nav-number">5.2.1.</span> <span class="nav-text">5.2.1 光标移动</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#5-2-2-%E6%8F%92%E5%85%A5%E8%A1%8C"><span class="nav-number">5.2.2.</span> <span class="nav-text">5.2.2 插入行</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#5-2-3-%E5%88%A0%E9%99%A4%E6%96%87%E6%9C%AC"><span class="nav-number">5.2.3.</span> <span class="nav-text">5.2.3 删除文本</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#5-2-4-%E5%89%AA%E5%88%87%EF%BC%8C%E5%A4%8D%E5%88%B6%EF%BC%8C%E7%B2%98%E8%B4%B4"><span class="nav-number">5.2.4.</span> <span class="nav-text">5.2.4 剪切，复制，粘贴</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#5-2-5-%E5%90%88%E5%B9%B6%E8%A1%8C"><span class="nav-number">5.2.5.</span> <span class="nav-text">5.2.5 合并行</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-3-%E7%BC%96%E8%BE%91%E6%A8%A1%E5%BC%8F"><span class="nav-number">5.3.</span> <span class="nav-text">5.3 编辑模式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-4-%E6%9C%AB%E8%A1%8C%E6%A8%A1%E5%BC%8F"><span class="nav-number">5.4.</span> <span class="nav-text">5.4 末行模式</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#5-4-1-%E6%9F%A5%E6%89%BE%E5%92%8C%E6%9B%BF%E6%8D%A2"><span class="nav-number">5.4.1.</span> <span class="nav-text">5.4.1 查找和替换</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-5-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98"><span class="nav-number">5.5.</span> <span class="nav-text">5.5 常见问题</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#5-5-1-vi%E7%BC%96%E8%BE%91%E5%99%A8%E5%8D%A1%E6%AD%BB"><span class="nav-number">5.5.1.</span> <span class="nav-text">5.5.1 vi编辑器卡死</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#6-Perf-%E7%81%AB%E7%84%B0%E5%9B%BE"><span class="nav-number">5.6.</span> <span class="nav-text">6 Perf 火焰图</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">胡云浩</p>
  <div class="site-description" itemprop="description">记录生活，记录工作，记录学习</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">18</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">16</span>
        <span class="site-state-item-name">分类</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">52</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">胡云浩</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
